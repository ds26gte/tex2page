<!DOCTYPE html>
<html lang=en>
<!--
Generated from index.tex by tex2page, v. 20171214
Copyright (C) 1997-2017 Dorai Sitaram
(running on ECL 16.1.2 Linux)
http://ds26gte.github.io/tex2page/index.html
-->
<head>
<meta charset="utf-8">
<title>
TeX2page
</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Proza+Libre" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Miltonian" />
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=EB+Garamond" />
<link rel="stylesheet" href="index-Z-S.css" />
<meta name=robots content="index,follow">

<meta name=description content="Scheme, Common Lisp script for making Web pages
from TeX documents">

<meta name=author content="Dorai Sitaram">
<!-- <link rev=made href="mailto:ds26gte at yahoo dot com"> -->

</head>
<body>
<div>
<div class=navigation><a class=hrefinternal href="index-Z-H-8.html">&#x3c;&#xb7;&#xb7;&#xb7;Prev </a>||<a class=hrefinternal href="index-Z-H-10.html"> Next&#xb7;&#xb7;&#xb7;&#x3e;</a>, &#xa0;&#xa0; <a class=hrefinternal href="index.html#TAG:__tex2page_tag_Temp_1">ToC</a>, &#xa0;&#xa0; <a class=hrefinternal href="index-Z-H-16.html#TAG:__tex2page_tag_Temp_95">Index</a></div>
<p>
</p>
<a id="TAG:__tex2page_chap_9"></a>
<h1 class=chapter><a class=hrefinternal href="index.html#TAG:__tex2page_toc_TAG:__tex2page_chap_9">9&#xa0;&#xa0;Images  </a></h1>
<p class=noindent><a id="TAG:__tex2page_index_358"></a><a id="TAG:__tex2page_index_360"></a><a id="TAG:__tex2page_index_362"></a><a id="TAG:__tex2page_index_364"></a><a id="TAG:__tex2page_index_366"></a><a id="TAG:__tex2page_index_368"></a><a id="TAG:__tex2page_index_370"></a>Some portions of your T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X&#x200b; &#x200b;source may be explicitly
images, or text that is particularly resistant to
conversion to HTML.  Examples are JPEGs from digital cameras, encapsulated
PostScript inserts, mathematics, and the L<span style="position: relative; bottom: 0.3ex; margin-left: -0.36em; margin-right: -0.15em; text-transform: uppercase"><small>a</small></span>T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X
<code class=verbatim>{picture}</code> environment.   T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X2page embeds these as images in the HTML
output.</p>
<p>

</p>
<a id="TAG:__tex2page_sec_Temp_66"></a>
<h2 class=section>Mathematics</h2>
<p class=noindent><a id="TAG:__tex2page_index_372"></a>Math is typically text between <code class=verbatim>$...$</code> (in-text
math) and <code class=verbatim>$$...$$</code> (displayed math).  Here are some
samples of mathematics with T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X:</p>
<p>

</p>
<pre class=verbatim>
$$ F = G {m_1 m_2 \over r^2 } $$

$$ \int_0^\infty { t - ib \over t^2 + b^2} e^{iat}\,dt =
e^{ab} E_1(ab), \qquad a, b &#x3e; 0 $$

$$ A =
\left(
\matrix{ x - \lambda &#x26; 1           &#x26; 0           \cr
         0           &#x26; x - \lambda &#x26; 1           \cr
         0           &#x26; 0           &#x26; x - \lambda \cr}
\right) $$
</pre>
<p class=noindent>
These produce, respectively:</p>
<p>

</p>
<div class="mathdisplay centerline"><img src="index-Z-G-1.png" style="border: 0" alt=" F = G {m_1 m_2 \over r^2 } "></div>
<p class=noindent></p>
<p>

</p>
<div class="mathdisplay centerline"><img src="index-Z-G-2.png" style="border: 0" alt=" \int_0^\infty { t - ib \over t^2 + b^2} e^{iat}\,dt =
e^{ab} E_1(ab), \qquad a, b > 0 "></div>
<p class=noindent></p>
<p>

</p>
<div class="mathdisplay centerline"><img src="index-Z-G-3.png" style="border: 0" alt=" A =
\left(
\matrix{ x - \lambda & 1           & 0           \cr
         0           & x - \lambda & 1           \cr
         0           & 0           & x - \lambda \cr}
\right)
"></div>
<p class=noindent></p>
<p>

<a id="TAG:__tex2page_index_374"></a></p>
<p>

In-text mathematics is also available.  E.g.,</p>
<p>

</p>
<pre class=verbatim>
The Euclidean distance between two points is
$\sqrt{ (\Delta x)^2 + (\Delta y)^2 }$.
</pre>
<p class=noindent>
produces</p>
<p>

</p>
<blockquote><div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>

<p class=noindent>
The Euclidean distance between two points is
&#x221a;( (&#x394;<em>x</em>)<sup>2</sup>  +  (&#x394;<em>y</em>)<sup>2</sup> ).
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
</blockquote><p>
</p>

<p class=noindent></p>
<p>

You can control whether your math displays should
be specified as image or text with the
flag <code class=verbatim>\TZPmathtext</code>
(p.&#xa0;<a class=hrefinternal href="index-Z-H-6.html#TAG:__tex2page_tag_Temp_35">6</a>).
With <code class=verbatim>\let\TZPmathtext=1</code>,
the three examples above
look as follows:</p>
<p>


</p>
<div class="mathdisplay centerline"><table style="margin-left:auto; margin-right:auto"><tr><td></td><td><table><tr><td class=centerline> <em>F</em>  =  <em>G</em> </td><td><table><tr><td class=centerline><em>m</em><sub>1</sub> <em>m</em><sub>2</sub> </td></tr><tr><td style="height=1pt; background-color: black"></td></tr><tr><td class=centerline><em>r</em><sup>2</sup>  </td></tr></table></td><td>  </td></tr></table></td><td></td></tr></table></div>
<p class=noindent></p>
<p>

</p>
<div class="mathdisplay centerline"><table style="margin-left:auto; margin-right:auto"><tr><td></td><td><table><tr><td class=centerline> <span style="font-size: 200%; position: relative; top: .25ex;">&#x222b;</span><span style="margin-left: .16667em"> </span><span style="font-size: 85%; position: relative; top: 2.5ex; ">0</span><span style="font-size: 85%; position: relative; bottom: 3ex; ">&#x221e;</span></td><td><table><tr><td class=centerline> <em>t</em> &#x2212; <em>i</em><em>b</em> </td></tr><tr><td style="height=1pt; background-color: black"></td></tr><tr><td class=centerline><em>t</em><sup>2</sup>  +  <em>b</em><sup>2</sup></td></tr></table></td><td> <em>e</em><sup><em>i</em><em>a</em><em>t</em></sup><span style="margin-left: .16667em"> </span><em>d</em><em>t</em>  = 
<em>e</em><sup><em>a</em><em>b</em></sup> <em>E</em><sub>1</sub>(<em>a</em><em>b</em>), <span style="margin-left: 2em"> </span><em>a</em>, <em>b</em> &#x3e; 0  </td></tr></table></td><td></td></tr></table></div>
<p class=noindent></p>
<p>

</p>
<div class="mathdisplay centerline"><table style="margin-left:auto; margin-right:auto"><tr><td></td><td><table><tr><td class=centerline> <em>A</em>  = 
</td><td><table><tr><td><table class=mathdelim><tr><td>&#x239b;</td></tr><tr><td>&#x239c;</td></tr><tr><td>&#x239c;</td></tr><tr><td>&#x239d;</td></tr></table></td><td><table><tr><td class=centerline>
</td><td><table><tr><td class=centerline> <em>x</em> &#x2212; &#x3bb;&#xa0;</td><td class=centerline>&#xa0; 1           &#xa0;</td><td class=centerline>&#xa0; 0           </td></tr>
<tr><td class=centerline>
0           &#xa0;</td><td class=centerline>&#xa0; <em>x</em> &#x2212; &#x3bb;&#xa0;</td><td class=centerline>&#xa0; 1           </td></tr>
<tr><td class=centerline>
0           &#xa0;</td><td class=centerline>&#xa0; 0           &#xa0;</td><td class=centerline>&#xa0; <em>x</em> &#x2212; &#x3bb;</td></tr></table></td><td>

</td></tr></table></td><td><table class=mathdelim><tr><td>&#x239e;</td></tr><tr><td>&#x239f;</td></tr><tr><td>&#x239f;</td></tr><tr><td>&#x23a0;</td></tr></table></td></tr></table></td><td>

</td></tr></table></td><td></td></tr></table></div>
<p class=noindent>
</p>
<a id="TAG:__tex2page_sec_Temp_67"></a>
<h2 class=section>Graphics inclusions  </h2>
<p class=noindent><a id="TAG:__tex2page_index_376"></a><a id="TAG:__tex2page_index_378"></a><a id="TAG:__tex2page_index_380"></a><a id="TAG:__tex2page_index_382"></a><a id="TAG:__tex2page_index_384"></a>Encapsulated PostScript files (EPS) are a convenient
and popular way to insert pictures (graphics) into T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X
documents&#xa0;[<a class=hrefinternal href="index-Z-H-13.html#TAG:__tex2page_bib_17">17</a>].
Users create EPS files with their favorite external
programs, which can be GUI tools such as
Inkscape&#xa0;[<a class=hrefinternal href="index-Z-H-13.html#TAG:__tex2page_bib_24">24</a>,&#xa0;<a class=hrefinternal href="index-Z-H-13.html#TAG:__tex2page_bib_26">26</a>,&#xa0;<a class=hrefinternal href="index-Z-H-13.html#TAG:__tex2page_bib_2">2</a>],
GIMP&#xa0;[<a class=hrefinternal href="index-Z-H-13.html#TAG:__tex2page_bib_15">15</a>,&#xa0;<a class=hrefinternal href="index-Z-H-13.html#TAG:__tex2page_bib_38">38</a>],
and Xfig&#xa0;[<a class=hrefinternal href="index-Z-H-13.html#TAG:__tex2page_bib_51">51</a>],
or algebraic
ones like MetaPost&#xa0;[<a class=hrefinternal href="index-Z-H-13.html#TAG:__tex2page_bib_20">20</a>,&#xa0;<a class=hrefinternal href="index-Z-H-13.html#TAG:__tex2page_bib_27">27</a>].
<a id="TAG:__tex2page_index_386"></a><a id="TAG:__tex2page_index_388"></a></p>
<p>

However it is created, an EPS file is typically
inserted as a T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X&#x200b; &#x200b;box into a T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X&#x200b; &#x200b;document with calls
like</p>
<p>

</p>
<pre class=verbatim>
\epsfbox{<em> eps-file</em>}
\includegraphics{<em> eps-file</em>}
</pre>
<p class=noindent>
<a id="TAG:__tex2page_index_390"></a><a id="TAG:__tex2page_index_392"></a>These are commands defined external to plain T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X&#x200b; &#x200b;or L<span style="position: relative; bottom: 0.3ex; margin-left: -0.36em; margin-right: -0.15em; text-transform: uppercase"><small>a</small></span>T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X.
Plain T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X
documents using <code class=verbatim>\epsfbox</code> must load the standard
macro file called <code class=verbatim>epsf.tex</code>.
L<span style="position: relative; bottom: 0.3ex; margin-left: -0.36em; margin-right: -0.15em; text-transform: uppercase"><small>a</small></span>T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X&#x200b; &#x200b;documents using <code class=verbatim>\epsfbox</code> can do the
same, or they can load the <code class=verbatim>epsfig.sty</code> package.</p>
<p>

<a id="TAG:__tex2page_index_394"></a></p>
<p>

<code class=verbatim>\includegraphics</code> is a generic graphics includer that tackles more than
EPS files, based on file extension.  Thus, if your file has a
nonstandard extension, you
will have to inform <code class=verbatim>\includegraphics</code> of this using directives like the
following:</p>
<p>

</p>
<pre class=verbatim>
\DeclareGraphicsRule{.1}{mps}{*}{}
</pre>
<p class=noindent>
This states that files with extension <code class=verbatim>.1</code> are to be treated as EPS
files generated by MetaPost.</p>
<p>

<a id="TAG:__tex2page_index_396"></a><a id="TAG:__tex2page_index_398"></a></p>
<p>

<code class=verbatim>\includegraphics</code> is defined in the L<span style="position: relative; bottom: 0.3ex; margin-left: -0.36em; margin-right: -0.15em; text-transform: uppercase"><small>a</small></span>T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X&#x200b; &#x200b;package <code class=verbatim>graphicx.sty</code>,
which can also be loaded by
plain-T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X&#x200b; &#x200b;documents with the help of <code class=verbatim>miniltx.tex</code>, as we saw
with <code class=verbatim>color.sty</code> on p.&#xa0;<a class=hrefinternal href="index-Z-H-4.html#TAG:__tex2page_tag_Temp_29">4</a>.<a id="TAG:__tex2page_call_footnote_Temp_68"></a><span class=footnotemark><sup><a class=hrefinternal href="#TAG:__tex2page_footnote_Temp_68">1</a></sup></span></p>
<p>

</p>
<pre class=verbatim>
\input miniltx
\input graphicx.sty
\resetatcatcode
</pre>
<p class=noindent>
<a id="TAG:__tex2page_index_400"></a><a id="TAG:__tex2page_index_402"></a>For <code class=verbatim>\epsfbox</code>, you can specify the desired image
width and height by assigning to the dimen
registers <code class=verbatim>\epsfxsize</code> and <code class=verbatim>\epsfysize</code>
(specifying only one of them will cause the other to
change as well, maintaining the image’s aspect ratio).
T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X2page will respect such sizes, equating one browser
pixel to one point (= 1/72.27 inch).  Thus,</p>
<p>

</p>
<pre class=verbatim>
\epsfxsize=1.5in
</pre>
<p class=noindent>
sets the width of an immediately following <code class=verbatim>\epsfbox</code>ed image to
1.5 &#xd7;72.27 &#x2248;108
pixels.
<code class=verbatim>\epsfxsize</code> and
<code class=verbatim>\epsfysize</code> are cleared after each
<code class=verbatim>\epsfbox</code>.</p>
<p>

<a id="TAG:__tex2page_index_404"></a><a id="TAG:__tex2page_index_406"></a></p>
<p>

If you use pdfT<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X&#x200b; &#x200b;or luaT<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X&#x200b; &#x200b;(which produce PDF
instead of DVI output), you can insert
MetaPost-created EPS files with the
<code class=verbatim>\convertMPtoPDF</code> command:</p>
<p>

</p>
<pre class=verbatim>
\convertMPtoPDF{<em> eps-file</em>}{1}{1}
</pre>
<p class=noindent>
<code class=verbatim>\convertMPtoPDF</code> is defined in the macro file
<code class=verbatim>supp&#x2011;pdf.tex</code> of the ConT<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>Xt&#x200b; &#x200b;package,
which is included in most modern distributions of T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X.
Caveat: <code class=verbatim>\convertMPtoPDF</code> doesn’t work for EPS files
that weren’t made using MetaPost!</p>
<p>

<a id="TAG:__tex2page_index_408"></a></p>
<p>

pdfT<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X&#x200b; &#x200b;can import common graphics formats
such PNG and JPEG: Either use <code class=verbatim>\includegraphics</code>, or a primitive call
such as</p>
<p>

</p>
<pre class=verbatim>
\pdfximage height 1.5in {pic.png}\pdfrefximage\pdflastxmimage
</pre>
<p class=noindent></p>
<p>

T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X2page recognizes the scaling information supplied with <code class=verbatim>\pdfximage</code>
and <code class=verbatim>\includegraphics</code>,  with one browser pixel
equated to one point.  Unlike EPS files, PNG and JPEG images are directly
supported by HTML, so T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X2page does not need to convert them.</p>
<p>

<a id="TAG:__tex2page_index_410"></a><a id="TAG:__tex2page_index_412"></a><a id="TAG:__tex2page_index_414"></a></p>
<p>

X<span style="text-transform: uppercase; position: relative; top: 0.5ex; margin-left: -0.125em; margin-right: -0.1667em">&#x1dd;</span>T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X&#x200b; &#x200b;has its own duo of graphics-insertion commands:
<code class=verbatim>\XeTeXpdffile</code> for PDF images, and <code class=verbatim>\XeTeXpicfile</code> for
JPEG and GIF images. E.g.,</p>
<p>

</p>
<pre class=verbatim>
\centerline{\XeTeXpicfile tbdek.jpg width 3in \relax}
</pre>
<p class=noindent>
for</p>
<p>

</p>
<div class=centerline>&#xa0;<img src="tbdek.jpg" width=216 alt="tbdek.jpg">&#xa0;</div>
<p>

There are two ways to load a graphic specified in MetaPost:</p>
<p>

(<span class=item>i</span>) You can have MetaPost convert the spec to EPS, and
then use a utility like <code class=verbatim>epstopdf</code> to convert the EPS to PDF.
Let’s start with a MetaPost file
<a href="mpexample.html"><code class=verbatim>lambda.mp</code></a>. At the OS shell, type:</p>
<p>

</p>
<pre class=verbatim>
mpost lambda.mp
epstopdf lambda-1.eps
</pre>
<p class=noindent></p>
<p>


This creates a PDF file <code class=verbatim>lambda&#x2011;1.pdf</code>, which is inserted in
the source document via</p>
<p>

</p>
<pre class=verbatim>
\centerline{\XeTeXpdffile lambda-1.pdf }
</pre>
<p class=noindent>
to obtain<a id="TAG:__tex2page_call_footnote_Temp_69"></a><span class=footnotemark><sup><a class=hrefinternal href="#TAG:__tex2page_footnote_Temp_69">2</a></sup></span></p>
<p>

<a id="TAG:__tex2page_index_424"></a></p>
<p>

</p>
<div class=centerline>&#xa0;<img src="index-Z-G-4.png" alt="index-Z-G-4.png">&#xa0;</div>
<p>

(<span class=item>ii</span>) Alternatively, you can have MetaPost directly convert
the spec to
PNG. In <code class=verbatim>lambda.mp</code>, change the <code class=verbatim>outputformat</code> setting to <code class=verbatim>png</code>,
i.e.,</p>
<p>

</p>
<pre class=verbatim>
outputformat := &#x22;png&#x22;;
</pre>
<p class=noindent>
Metapost will directly produce the file <code class=verbatim>lambda&#x2011;1.png</code>, which
can be inserted with</p>
<p>

</p>
<pre class=verbatim>
\XeTeXpicfile lambda-1.png
</pre>
<p class=noindent></p>
<p>

</p>
<a id="TAG:__tex2page_sec_Temp_70"></a>
<h2 class=section>Other image inserts</h2>
<p class=noindent><a id="TAG:__tex2page_index_426"></a>You may explicitly request any part at all of your T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X
document — not just its math or EPS inserts —
to be converted into images for your HTML output.  The
fragment of the document to be converted to image is
given as an <code class=verbatim>\makehtmlimage</code> argument.
Here’s an example T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X-based diagram from <em>
The T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>Xbook</em>&#xa0;[<a class=hrefinternal href="index-Z-H-13.html#TAG:__tex2page_bib_28">28</a>,&#xa0;p.&#xa0;389]:</p>
<p>

</p>
<pre class=verbatim>\makehtmlimage{
\newdimen\unit
\def\point#1 #2 {\rlap{\kern#1\unit
    \raise#2\unit\hbox{$
      \scriptstyle\bullet\;(#1,#2)$}}}
\unit=\baselineskip
\centerline{\vtop{\hrule
  \hbox{\vrule height10\unit depth9.4\unit \kern2\unit
    \hbox{%
      \point 0 0 % Alioth (Epsilon Ursae Majoris), mag 1.79
      \point 0 8 % Dubhe (Alpha Ursae Majoris),    mag 1.81
      \point 0 -8 % Alkaid (Eta Ursae Majoris),    mag 1.87
      \point -1 -2.5 % Mizar (Zeta Ursae Majoris), mag 2.26
      \point 4 7 % Merak (Beta Ursae Majoris),     mag 2.37
      \point 4 2 % Phekda (Gamma Ursae Majoris),   mag 2.44
      \point 1 1.5 % Megrez (Delta Ursae Majoris), mag 3.30
      }%    Src: Atlas of the Universe; Astronomy Data Book
    \kern7\unit \vrule}\hrule}}
}
</pre><p>
</p>

<p class=noindent>This produces the  image:</p>
<p>

</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">

<img src="index-Z-G-5.png" style="border: 0" alt="[index-Z-G-5.png]">

</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>

<p class=noindent><code class=verbatim>\makehtmlimage</code>’s argument is a group containing
no unmatched braces.</p>
<p>

</p>
<a id="TAG:__tex2page_sec_Temp_71"></a>
<h2 class=section>Image preamble</h2>
<p class=noindent><a id="TAG:__tex2page_tag_Temp_72"></a>
<a id="TAG:__tex2page_index_428"></a><a id="TAG:__tex2page_index_430"></a><a id="TAG:__tex2page_index_432"></a>When converting math, EPS, and other implicit or
explicit <code class=verbatim>\htmlimage</code>s into images for HTML, T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X2page
extracts the small fragment of the T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X&#x200b; &#x200b;document
containing the would-be image into a separate, smaller
T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X&#x200b; &#x200b;file.  The content of this auxiliary T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X&#x200b; &#x200b;file is
then cajoled by a bevy of external programs into
an image file suitable for HTML (p.&#xa0;<a class=hrefinternal href="index-Z-H-6.html#TAG:__tex2page_tag_Temp_37">6</a>).  This demands that
all the T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X&#x200b; &#x200b;code within the auxiliary T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X&#x200b; &#x200b;file be
self-sufficient.  However, it is quite possible that
such T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X&#x200b; &#x200b;fragments contain references to macros
defined elsewhere in the larger document.
T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X2page therefore provides the <code class=verbatim>\imgpreamble</code>
<code class=verbatim>...</code> <code class=verbatim>\endimgpreamble</code> environment, into which
are placed all the definitions that are necessary for
the HTML images.   For example, the “image preamble”</p>
<p>

</p>
<pre class=verbatim>
\ifx\shipout\UnDeFiNeD % HTML only
  \imgpreamble
    \input some-pic-macs
    \let\gO\Omega
    \def\I#1#2{\int_{#1}^#2}
  \endimgpreamble
\fi
</pre>
<p class=noindent>
allows the use of the control sequences <code class=verbatim>\gO</code>,
<code class=verbatim>\I</code>, and those in <code class=verbatim>some&#x2011;pic&#x2011;macs.tex</code> in the
T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X&#x200b; &#x200b;fragments destined for imagehood.</p>
<p>

The commands inside <code class=verbatim>\imgpreamble</code> are visible only
to T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X2page, so a form of them should also be
specified outside the <code class=verbatim>\imgpreamble</code> for use by T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X
when it processes the entire document for DVI.</p>
<p>

Note that if you use encapsulated PostScript inserts,
it is not necessary (though it doesn’t hurt) to
specify an image preamble for loading the <code class=verbatim>epsf.tex</code>
macro file or <code class=verbatim>graphicx.sty</code> package.  T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X2page will
automatically load them when processing the EPS files.
You still need to load these files outside the image
preamble for your document to be processable by T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X
though.</p>
<p>

</p>
<a id="TAG:__tex2page_sec_Temp_73"></a>
<h2 class=section>Image magnification</h2>
<p class=noindent><a id="TAG:__tex2page_index_434"></a><a id="TAG:__tex2page_index_436"></a>In general, the magnification of the image
inserts, whether math or picture, may not match that
of the rest of the text in the HTML output.  The DVI
output has no such problem, because the math and
the picture-macros use the same magnification as the
surrounding text.  In the HTML output, however, the
regular text is rendered at the default magnification
of your browser, while the images have come via T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X,
and the twain may not meet.  Typically, the image is
too small.</p>
<p>

The solution is to adjust the magnification of  just
the image inserts.  In plain T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X, this can be
done by a call to the <code class=verbatim>\magnification</code> command <em>
inside</em> the image preamble.  E.g.,</p>
<p>

</p>
<pre class=verbatim>
\ifx\shipout\UnDeFiNeD
  \imgpreamble
    \magnification\magstep1
    ...
  \endimgpreamble
\fi
</pre>
<p class=noindent>
The above will magnify the HTML math and pictures.
Note that it will <em>not</em> affect the magnification
of these same items in the DVI output.  Indeed,
you can specify an alternate <code class=verbatim>\magnification</code>
outside <code class=verbatim>\imgpreamble</code>, and that will affect
overall size of the entire DVI output, inclusive of
math and pictures, as advertised in <em>The T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>Xbook</em>
[<a class=hrefinternal href="index-Z-H-13.html#TAG:__tex2page_bib_28">28</a>].</p>
<p>

In sum: <code class=verbatim>\magnification</code>, when called <em>
outside</em> the <code class=verbatim>\imgpreamble</code>, magnifies the
entire DVI document.  When called <em>inside</em>
the <code class=verbatim>\imgpreamble</code>, it will magnify  just the
images in the HTML document.  These two uses
of <code class=verbatim>\magnification</code> will not interfere.</p>
<p>

L<span style="position: relative; bottom: 0.3ex; margin-left: -0.36em; margin-right: -0.15em; text-transform: uppercase"><small>a</small></span>T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X&#x200b; &#x200b;users can use the following:</p>
<p>

</p>
<pre class=verbatim>
\ifx\shipout\UnDeFiNeD
  \imgpreamble
    \let\LaTeXdocument\document
    \def\document{\LaTeXdocument\Large}
  \endimgpreamble
\fi
</pre>
<p class=noindent>
This tacks a hook on to the <code class=verbatim>\document</code> command.
(This modified <code class=verbatim>\document</code> will only operate
on the image.)</p>
<p>

</p>
<a id="TAG:__tex2page_sec_Temp_74"></a>
<h2 class=section>Reusing image files</h2>
<p class=noindent><a id="TAG:__tex2page_tag_Temp_75"></a>
<a id="TAG:__tex2page_index_438"></a><a id="TAG:__tex2page_index_440"></a><a id="TAG:__tex2page_index_442"></a><code class=verbatim>\def</code>initions that use math (such as the following
one for <code class=verbatim>\um</code>) work as expected in the
HTML output.</p>
<p>

</p>
<pre class=verbatim>
\def\um{$\mu$m}

The human eye can see electromagnetic wavelengths from 0.39 \um\
to 0.78 \um.
</pre>
<p class=noindent>
produces</p>
<p>

</p>
<blockquote><div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>

<p class=noindent>
The human eye can see electromagnetic wavelengths from 0.39 <img src="index-Z-G-D-1.png" style="border: 0" alt="[index-Z-G-D-1.png]">
to 0.78 <img src="index-Z-G-D-1.png" style="border: 0" alt="[index-Z-G-D-1.png]">.
</p>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
</blockquote><p>
</p>

<p class=noindent></p>
<p>

<a id="TAG:__tex2page_index_444"></a></p>
<p>

</p>

<p class=noindent>This could<a id="TAG:__tex2page_call_footnote_Temp_76"></a><span class=footnotemark><sup><a class=hrefinternal href="#TAG:__tex2page_footnote_Temp_76">3</a></sup></span> force every occurrence
of <code class=verbatim>\um</code> in the document to generate a brand new
image file.  To advise T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X2page to <em>reuse</em>
the same image for these multiple occurrences, use
<code class=verbatim>\imgdef</code> for the HTML:</p>
<p>

</p>
<pre class=verbatim>
\ifx\shipout\UnDeFiNeD % HTML only
  \imgdef\um{$\mu$m}
\else
  \def\ohm{$\mu$m}
\fi
</pre>
<p class=noindent></p>
<p>

</p>
<a id="TAG:__tex2page_sec_Temp_77"></a>
<h2 class=section>Recycling image files</h2>
<p class=noindent><a id="TAG:__tex2page_index_446"></a>The conversion of T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X&#x200b; &#x200b;fragments into images can
consume a lot of time.  T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X2page will therefore
<em>recycle</em> existing image files from
a previous run, instead of generating them anew.
To <em>force</em> generation of new image files, delete
the old image files.</p>
<p>

</p>
<div class=footnoterule><hr></div><p>
</p>
<div class=footnote><p>
<span class=footnotemark><a id="TAG:__tex2page_footnote_Temp_68"></a><sup><a class=hrefinternal href="#TAG:__tex2page_call_footnote_Temp_68">1</a></sup></span> It is possible to <code class=verbatim>\input</code>
several <code class=verbatim>.sty</code> files between the calls to <code class=verbatim>\input</code> <code class=verbatim>miniltx</code> and
<code class=verbatim>\resetatcatcode</code>.  However, <code class=verbatim>miniltx</code> is a bit of a compromise, and it
causes each <code class=verbatim>.sty</code> file to re-evaluate the supposedly per-document commands
in the driver file
(e.g., <code class=verbatim>pdftex.def</code>), which can cause infinite loops.  This is avoided by
preceding the loading of the second and subsequent <code class=verbatim>.sty</code>
files with <code class=verbatim>\let\color\@ldc@l@r</code>.</p>
<p>
<span class=footnotemark><a id="TAG:__tex2page_footnote_Temp_69"></a><sup><a class=hrefinternal href="#TAG:__tex2page_call_footnote_Temp_69">2</a></sup></span> <a id="TAG:__tex2page_index_416"></a><a id="TAG:__tex2page_index_418"></a><a id="TAG:__tex2page_index_420"></a><a id="TAG:__tex2page_index_422"></a>The file
<code class=verbatim>lambda.mp</code> was actually written out from this document’s
source using <code class=verbatim>\verbwrite</code> (p.&#xa0;<a class=hrefinternal href="index-Z-H-8.html#TAG:__tex2page_tag_Temp_58">8</a>),
so the files <code class=verbatim>lambda&#x2011;1.eps</code> and <code class=verbatim>lambda&#x2011;1.pdf</code> aren’t immediately available
on the first run. T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X&#x200b; &#x200b;will signal a file-not-found error and go
into a debug loop, even though the MetaPost file needed to create
the missing file can only be created if T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X&#x200b; &#x200b;successfully
finishes processing the source document! To force T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X&#x200b; &#x200b;to finish
processing the source file regardless of missing files, you need
to run it in
<code class=verbatim>\scrollmode</code>, or its even more reckless cousins
<code class=verbatim>\nonstopmode</code> and <code class=verbatim>\batchmode</code>.  One way to get into
these modes is to type <code class=verbatim>s</code>, <code class=verbatim>r</code>, or <code class=verbatim>q</code>,
respectively, at the T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X&#x200b; &#x200b;debug prompt.  By default, T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X
runs in <code class=verbatim>\errorstopmode</code>, which is why it stops on
the missing-file error. A different approach is to use “shell
escape” to call <code class=verbatim>mpost</code> and <code class=verbatim>epstopdf</code> from within your
source file. See p.&#xa0;<a class=hrefinternal href="index-Z-H-8.html#TAG:__tex2page_tag_Temp_59">8</a>.</p>
<p>
<span class=footnotemark><a id="TAG:__tex2page_footnote_Temp_76"></a><sup><a class=hrefinternal href="#TAG:__tex2page_call_footnote_Temp_76">3</a></sup></span> This is a cooked-up example. In actuality, T<span style="position: relative; top: 0.5ex; margin-left: -0.1667em; margin-right: -0.125em; text-transform: uppercase">e</span>X2page
is pretty good at aggressively avoiding math images in the first
place. But you can imagine a more complicated <code class=verbatim>\imgdef</code> that
happens to be repeated throughout your document.</p>
</div>
<div class=smallskip></div>
<p style="margin-top: 0pt; margin-bottom: 0pt">
</p>
<div class=navigation><a class=hrefinternal href="index-Z-H-8.html">&#x3c;&#xb7;&#xb7;&#xb7;Prev </a>||<a class=hrefinternal href="index-Z-H-10.html"> Next&#xb7;&#xb7;&#xb7;&#x3e;</a>, &#xa0;&#xa0; <a class=hrefinternal href="index.html#TAG:__tex2page_tag_Temp_1">ToC</a>, &#xa0;&#xa0; <a class=hrefinternal href="index-Z-H-16.html#TAG:__tex2page_tag_Temp_95">Index</a></div>
<p>
</p>
</div>
</body>
</html>

